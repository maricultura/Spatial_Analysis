---
title: "Data_Layers"
author: "Sandra Fogg"
date: "11/5/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


```{r}
# Load the Required Packages
library(tidyverse)
library(sf)
library(sp)
library(rgdal)
library(raster)
library(dplyr)
library(rgeos)
library(scales)
library(fasterize)
library(dismo)
library(maptools)
library(sdmpredictors)
library(maps)
library(ncdf4)
library(marmap)
```


Set-Up for Downloading Data Using the "Maricultura" Google Drive File Stream
```{r}
# Create a Root to Extract Files 
if(Sys.info()["sysname"] == "Windows"){ #If operating system is "Windows" use G: Drive
  team_path <- "G:/"
} else { # If it is not (i.e. Mac), use the Google Drive File Stream
  team_path <- "/Volumes/GoogleDrive/"
}

#Create the Full File Path
path <- paste0(team_path, "Shared drives/Bren GP 2020 maricultura/Data/Raw_Data/Active_Data_Layers")

```


Read in Downloaded Data Layers from the Shared Drive: Bren GP 2020 maricultura/Data/Raw_Data/Active_Layers
```{r}
## Exclusive Economic Zone, EEZ, marineregions.org

eez <- read_sf(dsn = path,
                layer = "eez_v10")
proj4string(eez)
class(eez)

CRS("+init=epsg:5880")
#CRS arguments:
# +init=epsg:5880 +proj=poly +lat_0=0 +lon_0=-54 +x_0=5000000 +y_0=10000000
#+ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs 

eez_BRA <- eez %>% 
  filter(ISO_Ter1 == "BRA")

plot(eez_BRA$geometry)

```

```{r}
## Depth, gebco.net
depth <- raster(paste0(path,"/gebco_2019_n7.045066_s-35.78779_w-54.58321_e-26.01452.tif"))

```


Read in Bio-Oracle
```{r}
#Explore Datasets and Layer Names in the Package 
##Explore Datasets
list_datasets() 

##Explore Layers
list_layers() 

#Download the Minimum and Maximum Sea-Surface Temperature, SST
min_sst <- load_layers("BO_sstmin")
max_sst <- load_layers("BO_sstmax")

plot(min_sst)


#Download Current Velocity, (Maximum Velocity at Minimum Depth)
max_cv <- load_layers("BO2_curvelmax_bdmin")


```

# Plot data 
```{r}
# EEZ
ggplot( data = eez) +
  geom_sf()
```

```{r}
# Depth
plot(depth)

hist(depth)
```

